{% load widget_tweaks %}
{% load crispy_forms_tags %}
{% load static %}
<head>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <!--Includes HTTP:/HTTPS: is compatible for Chrome/FireFox -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Ubuntu:regular,bold&subset=Latin">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    
    
</head>
{%include "main/HeadNav.html" %}

<body>
    <div class="container bcontent">
        <div class="card">
            <div class="row no-gutters">
                <div class="list-group">
                    <a href="{% url 'main:EditProfile' username=request.user.username %}" class="list-group-item list-group-item-action">Edit Profile</a>
                    <a href="#" class="list-group-item list-group-item-action">Change Password</a>
                    <a href="{% url 'main:SkillEdit' username=request.user.username %}" class="list-group-item list-group-item-action">Manage Skills</a>
                    <a href="{% url 'main:LocationEdit' username=request.user.username %}"  class="list-group-item list-group-item-action">Change location</a>
                    <a href="#" class="list-group-item list-group-item-action">Customer Service</a>
                
                </div>
                <script type = "text/javascript">
                  
                        </script> 
                <div class="col-sm-7">
                    {% if request.user.profile.pro_pic %} 
                            <img class="card-img" src="{{ request.user.profile.pro_pic.url }}">
                        {% else %}
                            <img class="card-img" src="{%static 'media\Default.jpg' %}">
                        {% endif %}
                    <div class = 'col-sm-9'>
                        <b style = 'font-family: Ubuntu, "times new roman", times, roman, serif;font-size:30px;'>
                            {% render_field request.user.username %}      
                        </b>    
                    </div>
                    <div class="card-body">
                        <form method = "POST" action = "" enctype="multipart/form-data">
                            {%csrf_token%}
                                <div class="card-text" style = "width:400px;max-width:-webkit-fill-available;">   
                                    {{ form.pro_pic|safe }}
                                    {{ form.descript|safe }} <label id = "Descript_cnt">Characters Remaining: 50</label>
                                    {{ form.intro|as_crispy_field }}
                                    
                                </div>
                               
                                    <div>
                                        <input class="btn btn-primary" type="submit">
                                        
                                    </div>
                        </form>
                    </div>
                </div>
            </div>   
                <div class = 'vl'></div> 
                <hr style = "height:2px;width:20%; position: absolute; top: 80%;border:none;color:#c0bebe;background-color:#c0bebe;">
        </div>
    </div>

</body>
<script>
    const myText = document.getElementById("id_intro");
    const remainChars = document.getElementsByClassName("text-count-current")[0];
    const MaxChars = 1000;
    const initDiff = MaxChars - myText.value.length;
    remainChars.textContent = `${initDiff}`;
    myText.addEventListener("input",() => {
        const remaining = MaxChars - myText.value.length;
        const color = remaining < MaxChars * .1 ? 'red':null;
        remainChars.textContent = `${remaining}`;
        remainChars.style.color = color;
        if (myText.value.length >= 1000){
            myText.stop()
        };
    });     
</script>
<script>
    const myText1 = document.getElementById("id_descript");
    const remainChars1 = document.getElementById('Descript_cnt');
    const MaxChars1 = 50;
    const initDiff1 = MaxChars1 - myText1.value.length;
    remainChars1.textContent = `Characters Remaining: ${initDiff1}`;
    myText1.addEventListener("input",() => {
        const remaining1 = MaxChars1 - myText1.value.length;
        const color1 = remaining1 < MaxChars1 * .1 ? 'red':null;
        remainChars1.textContent = `Characters Remaining: ${remaining1}`;
        remainChars1.style.color = color;
        if (myText1.value.length >= 50){
            myText1.stop()
        };
    });   
</script>



<style>
    body{
        background-color:#FAFAFA;
    }
    .list-group{
        width:225;
    }
    .list-group-item{
        position:relative;
        display:block;
        padding:30;
        margin-bottom:-1px;
        background-color:#fff;
        border:2px solid #fff;
    }
    .list-group.a{
        font-size:17;
    }
    .card{
        position: absolute;
        top: 20%;
        width: 74%;
        left: 13%;
        height: 605px;
        max-height: 605px;
        max-width: 1200px;
    }
    .row{
        margin-left:0;
    }
    .vl {
        border-left: 2px solid #c0bebe;
        height: 100%;
        left:20%;
        position:absolute;
    }
    .col-sm-7{
        position: relative;
        left: 30%;
        top: 25px;
        }
    .card-img{
        max-width:50%;
        max-height:25%;
        border-radius:50%;
        border:1.5px solid #c0bebe;
    }
    .col-sm-9{
        max-width:100%;
        position:absolute;
        left: 200;
        top:54.6;
    }
    textarea {
        position: absolute;
        top: 72%;
        width: 138%;
        height: 12rem;
        background-color: whitesmoke;
        min-height: 12rem;
        max-height: 12rem;
    }
    #Descript_cnt{
        position: absolute;
        width: 100%;
        top: 66%;
        left: 62%;
    }
    #id_intro_counter{
        position: relative;
        top: 200px;
        left: 113%;
        font-size: 80%;
        color: #818a91;
    }
    .btn{
        position: absolute;
        top: 115%;

    }
    
</style>
